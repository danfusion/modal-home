/*! jQuery ModalHome - version:0.2.3 - Dan Miller https://github.com/dmill109/modal-home - 18-02-2014 */
(function(o){var e={},m={content:"",immediateDisplay:!1,modalTopPadding:75,modalHomeBg:"jhm-modal-bg",modalHomeDiv:"jhm-modal",modalHomeClose:"jhm-modal-close",modalHomeCloseMsg:"x",modalHomeLoader:"jhm-modal-loading",modalHomeContent:"jhm-modal-content",modalHomeOpenEvent:"jhm.modal.open",modalHomeCloseEvent:"jhm.modal.close",ajaxFailureContent:"Failed to load resource"},n=function(){return e},a=function(n){return e=o.extend({},m,n)},t={init:function(e){var m=a(e);this.length>0&&""!==this.html()&&(m.content=this.html(),a(m));var n=o("."+m.modalHomeBg),t=o("."+m.modalHomeDiv);return 0===n.length&&(n=l()),0===t.length&&(t=d()),m.content.length>0&&(m.immediateDisplay=!0,r(m.content),void 0!==m.success&&o.isFunction(m.success)&&m.success({})),o("."+m.modalHomeClose).on("click",function(){t.trigger(m.modalHomeCloseEvent)}),t.on(m.modalHomeCloseEvent,function(){s(t),t.off(m.modalHomeCloseEvent)}),t.on(m.modalHomeOpenEvent,function(){i(t),t.off(m.modalHomeOpenEvent)}),o("body").on("keyup",function(o){27===o.which&&t.trigger(m.modalHomeCloseEvent)}),o("."+m.modalHomeBg).on("click",function(){t.trigger(m.modalHomeCloseEvent)}),m.immediateDisplay===!0&&t.trigger(m.modalHomeOpenEvent),{modal:t,modalBg:n}},ajax:function(e){var m=o.fn.modalHome(e),a=n();c(),m.modal.trigger(a.modalHomeOpenEvent),o.ajax({url:e.url}).done(function(m){u(),r(m),o.isFunction(e.success)&&e.success(m)}).error(function(m){u(),r(a.ajaxFailureContent),o.isFunction(e.failure)&&e.failure(m)})},hide:function(){s()}},l=function(){var e=n();return o("body").append('<div class="'+e.modalHomeBg+'" />')},d=function(){var e=n();return o("."+e.modalHomeBg).before('<div class="'+e.modalHomeDiv+'"><div class="'+e.modalHomeClose+'">'+e.modalHomeCloseMsg+'</div><div class="'+e.modalHomeLoader+'"></div><div class="'+e.modalHomeContent+'"></div></div>')},i=function(){var e=n(),m=parseInt(o(document).scrollTop(),10);o("."+e.modalHomeBg).show(),o("."+e.modalHomeDiv).css({top:m+e.modalTopPadding}),o("."+e.modalHomeDiv).fadeIn(500)},s=function(){var e=n();o("."+e.modalHomeDiv).fadeOut(500).remove(),o("."+e.modalHomeBg).delay(500).hide().remove()},r=function(e){var m=n();o("."+m.modalHomeContent).empty(),o("."+m.modalHomeContent).html(e),o("."+m.modalHomeClose).html(m.modalHomeCloseMsg)},c=function(){var e=n();o("."+e.modalHomeContent).hide(),o("."+e.modalHomeLoader).show()},u=function(){var e=n();o("."+e.modalHomeContent).show(),o("."+e.modalHomeLoader).hide()};o.fn.modalHome=function(e){return o(this),t[e]?t[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?(o.error("Method "+e+" does not exist on jQuery.modalHome"),this):t.init.apply(this,arguments)}})(jQuery);